---
title: 计算机网络基础
tags: 计算机基础知识体系 计算机网络
---

## 一、计算机网络概述

　　计算机网络的五层结构是：**应用层-传输层-网络层-数据链路层-物理层**。应用层的常见协议有`HTTP、SMTP、SSH、FTP、DNS`等，传输层的常见协议有`TCP、UDP`等，网络层的常见协议有`IP、ARP`等。

　　以最常见的`HTTP`请求为例，请求报文在五层结构之间传递的过程是：

　　1、应用层请求报文包含了请求方法、URL、协议版本等，然后发送给传输层；

　　2、传输层为应用层请求报文加上首部，首部中包含了源端口号、目标端口号等，然后发送给网络层；

　　3、网络层为传输层请求报文加上首部，首部中包含了源IP、目标IP等，然后发送给数据链路层；

　　4、数据链路层接收到网络层请求报文后，将报文通过一节节链路传输到目标服务器上，然后通过相反的顺序对报文进行解析，最终发送到目标应用上。

## 二、TCP与UDP协议

　　TCP和UDP都是传输层中的协议，它们的区别是：**TCP协议是面向连接的、可靠的协议，而UDP是无连接的、不可靠的协议**。

* ### TCP面向连接

　　TCP是面向连接的协议，意思是只有当客户端和服务端建立连接之后，客户端才能向服务端发送请求。

　　假设浏览器是A，服务器是B，建立TCP连接的过程如下，简称**三次握手**：

　　1、第一次握手：A向B发送建立TCP连接的请求；

　　2、第二次握手：B收到请求后，向A发送同意建立TCP连接的确认请求；

　　3、第三次握手：A收到B的回复后，再次向B发送已接收到回复的确认请求。

　　第三次握手的作用是，如果第一次握手的请求在网络中滞留了较长时间，在这期间A认为报文丢失了，于是重新发送了第一次握手的请求并成功创建了连接，此时B收到了滞留的报文，并向A发送了同意建立连接的报文，**假如没有第三次握手，就会创建两个TCP连接**。

　　释放TCP连接的过程如下，简称**四次挥手**：

　　1、第一次挥手：A向B发送释放TCP连接的请求；

　　2、第二次挥手：B接收到请求后，向A发送同意释放TCP连接的确认请求，此时A到B方向的连接已经释放，但是B到A方向的连接还未释放，仍然可以发送数据；

　　3、第三次挥手：B向A发送释放TCP连接的请求；

　　4、第四次挥手：A接收到请求后，向B发送同意释放TCP连接的确认请求，此时B到A方向的连接也被释放，此次TCP连接结束。

* ### TCP可靠传输和拥塞控制

　　TCP能够正确处理在传输过程中丢包、传输顺序乱掉等异常情况，此外TCP还能有效利用带宽、缓解网络拥堵。

* ### UDP

　　和TCP不同的是，UDP是无连接的协议，并且不可靠。UDP不关心接收方是否收到了发送方传送过去的数据，如果需要检查，需要在应用层实现。

## 三、HTTP协议

　　HTTP协议的特点是：

　　1、**无连接**：使用HTTP协议之前不需要创建HTTP连接，HTTP协议使用了TCP连接；

　　2、**无状态**：HTTP协议不会将发送过的请求或响应持久化，Cookie就是用来弥补这一缺点的技术。

* ### HTTP1.0和HTTP1.1

　　HTTP1.0默认使用短连接，即每发送一次请求都会新建一个TCP连接，而HTTP1.0中默认使用长连接，即TCP连接默认不关闭。

* ### 请求报文和响应报文

　　请求报文格式如下：

![http请求报文格式](/assets/img/java/http请求报文格式.png)

　　响应报文格式如下：

![http响应报文格式](/assets/img/java/http响应报文格式.png)

　　其中响应状态码有以下几种：

　　1、1xx表示通知信息，如请求收到了或者正在进行处理；

　　2、2xx表示成功，如接受或知道了；

　　3、3xx表示重定向，如要完成请求还要采取进一步的行动；

　　4、4xx表示客户端的差错，如请求中有错误的语法或不能完成。

　　5、5xx表示服务器的差错，如服务器失效无法完成请求。