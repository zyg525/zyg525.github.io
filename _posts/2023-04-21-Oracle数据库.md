---
title: Oracle数据库
tags: 数据库 Oracle
layout: post
---

## 一、Oracle简介

* ### 用户(user)

　　Oracle的用户就是访问数据库的账号，用户拥有的属性有：模式(schema)、角色(role)、表空间(tablespace)、对象(包括)。

　　Oracle提供了两个管理员用户：

　　1、sys：高级管理员。

　　2、system：次级管理员。

* ### 模式(schema)

　　可以把schema理解为用户的别名，每个用户都有唯一的一个schema。

* ### 角色(role)

　　不同的角色拥有不同的权限，Oracle提供了三种标准的角色：

　　1、connect：只可以连接数据库进行查询，不能创建表。

　　2、resource：可以创建表，不能创建数据库结构。

　　3、dba：拥有最高权限，只有dba才可以创建数据库结构。

　　例：

```shell
grant resource,connect to zyg1; #向用户授予角色权限
```

* ### 表空间(tablespace)

　　表空间是一个逻辑概念，一个表空间可以包含多个数据文件，表空间有自己的容量，超过容量就无法包含更多的文件了。用户创建表，同时为该表分配一个表空间，当查询该表时，要通过用户去查。

　　简而言之：**用户相当于商人，表相当于商品，表空间就相当于仓库，表的所有者永远是用户，表空间只是用来存放表的地方**。

## 二、执行计划简介

　　一个典型的执行计划如下图所示：

![执行计划](/assets/img/java/执行计划.png)

* ### 表访问方式

　　**1、全表扫描(Full Table Scans)**

　　从第一条数据扫描到最后一条数据，对期间读到的所有数据施加WHERE条件中的过滤条件，效率较低。

　　**2、通过ROWID访问(table access by ROWID)**

　　ROWID是一个非用户定义的列(伪列)，通过ROWID可以唯一确定一条记录。通过ROWID访问有两种情况：一是直接通过ROWID查询数据，二是先通过索引查询到ROWID，然后通过ROWID回表查询数据。

　　**3、索引唯一扫描(INDEX UNIQUE SCAN)**

　　针对唯一索引的扫描方式。

　　**4、索引范围扫描(INDEX RANGE SCAN)**

　　索引范围扫描有两种情况：一是通过唯一索引进行范围查询(>、<、between等)，二是通过非唯一索引进行查询。

　　**5、索引(快速)全扫描(INDEX FULL SCAN、INDEX FAST FULL SCAN)**

　　当要查询的数据就是索引列时，只需要遍历叶子结点上的索引值，这就是索引全扫描。索引全扫描只对唯一索引生效，对非唯一索引不生效。

　　**6、索引跳跃式扫描(INDEX SKIP SCAN)**

　　针对使用联合索引时，违反了最左前缀匹配规则的一种特殊情况。假设联合索引是(a,b)，如果此时只通过b进行查询，并且a列的distinct数量很少(即重复值很多)，此时oracle会帮我们遍历a的所有distinct值，然后跳过a，直接通过b索引进行查询。如果a列的distinct数量很多，那么联合索引会彻底失效，只能全表扫描。

　　.

本文参考：

1、[Oracle 执行计划（Explain Plan）](https://www.cnblogs.com/xqzt/p/4467867.html)