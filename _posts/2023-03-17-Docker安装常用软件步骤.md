---
title: Docker安装常用软件步骤
tags: Linux
---

## MySQL

　　1、下载镜像

```shell
docker pull mysql:5.7
```

　　2、启动服务

```shell
docker run -p 3306:3306 --name mysql \
-v /mydata/mysql/log:/var/log/mysql \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=123456  \
--restart=always \
-d mysql:5.7
```

　　3、如果服务器拒绝访问，可能需要开启防火墙端口

```shell
firewall-cmd --zone=public --add-port=3306/tcp --permanent
firewall-cmd --reload
```

## Redis

　　1、下载镜像

```shell
docker pull redis:7
```

　　2、启动服务

```shell
docker run -p 6379:6379 --name redis \
-v /mydata/redis/data:/data \
--restart=always \
-d redis:7 redis-server
```

　　3、连接Redis客户端

```shell
docker exec -it redis redis-cli
```

## Elasticsearch

* ### 安装Elasticsearch

　　1、下载镜像

```shell
docker pull elasticsearch:7.17.3
```

　　2、修改虚拟内存区域大小，否则会因为过小而无法启动

```shell
sysctl -w vm.max_map_count=262144
```

　　3、启动服务

```shell
docker run -p 9200:9200 -p 9300:9300 --name elasticsearch \
-e "discovery.type=single-node" \
-e "cluster.name=elasticsearch" \
-e "ES_JAVA_OPTS=-Xms512m -Xmx1024m" \
-v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins \
-v /mydata/elasticsearch/data:/usr/share/elasticsearch/data \
--restart=always \
-d elasticsearch:7.17.3
```

　　4、如果`/mydata`文件夹缺少权限，需要修改权限
```shell
chmod 777 /mydata
```

　　5、访问`localhost:9200`，返回记录了ES版本信息的JSON字符串

* ### 安装中文分词器

　　1、下载中文分词器IKAnalyzer，下载地址：<https://github.com/medcl/elasticsearch-analysis-ik/releases>

　　2、将分词器解压后的文件放入`/mydata/elasticsearch/plugins/ik`目录下

　　3、重启容器

* ### 安装Kibana

　　Kibana 是为 Elasticsearch设计的开源分析和可视化平台。

　　1、下载镜像

```shell
docker pull kibana:7.17.3
```

　　2、启动服务

```shell
--link elasticsearch:es \
-e "elasticsearch.hosts=http://es:9200" \
--restart=always \
-d kibana:7.17.3
```

　　3、访问`localhost:5601`

## MongoDB

　　1、下载镜像

```shell
docker pull mongo:4
```

　　2、启动服务

```shell
docker run -p 27017:27017 --name mongo \
-v /mydata/mongo/db:/data/db \
--restart=always \
-d mongo:4
```

## RabbitMQ

　　1、下载镜像

```shell
docker pull rabbitmq:3.9-management
```

　　2、启动服务

```shell
docker run -p 5672:5672 -p 15672:15672 --name rabbitmq \
-v /mydata/rabbitmq/data:/var/lib/rabbitmq \
--restart=always \
-d rabbitmq:3.9-management
```

　　3、访问`localhost:15672`，账号密码都是guest
